<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Particle Life Simulation</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { background: #222; }
        #settings { position: absolute; color: white; top: 10px; left: 10px; }
    </style>
</head>
<body>
    <div id="settings">
        <label for="particleCount">Particle Count: <input type="number" id="particleCount" value="100" /></label><br>
        <label for="attractionStrength">Attraction Strength: <input type="range" id="attractionStrength" min="0" max="10" value="3" /></label><br>
        <label for="repulsionStrength">Repulsion Strength: <input type="range" id="repulsionStrength" min="0" max="10" value="3" /></label><br>
        <label for="speed">Speed Multiplier: <input type="range" id="speed" min="1" max="10" value="5" /></label><br>
        <label for="interactionRange">Interaction Range: <input type="range" id="interactionRange" min="10" max="200" value="50" /></label>
    </div>
    <canvas id="canvas"></canvas>
    <script>

        // Particle class
        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vx = Math.random() * 2 - 1;
                this.vy = Math.random() * 2 - 1;
                this.radius = 5;
            }
            update(particles) {
                for (let other of particles) {
                    const dx = other.x - this.x;
                    const dy = other.y - this.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (dist < interactionRange.value) {
                        const force = attractionStrength.value / (dist / 100) - repulsionStrength.value;
                        this.vx += (dx / dist) * force;
                        this.vy += (dy / dist) * force;
                    }
                }
                this.x += this.vx * speed.value / 10;
                this.y += this.vy * speed.value / 10;
                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
            render(context) {
                context.beginPath();
                context.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                context.fillStyle = 'white';
                context.fill();
            }
        }

        const canvas = document.getElementById("canvas");
        const context = canvas.getContext("2d");
        let particles = [];
        const particleCountElement = document.getElementById("particleCount");

        function setupParticles() {
            particles = [];
            for (let i = 0; i < particleCountElement.value; i++) {
                particles.push(new Particle(Math.random() * canvas.width, Math.random() * canvas.height));
            }
        }

        function draw() {
            context.clearRect(0, 0, canvas.width, canvas.height);
            for (let particle of particles) {
                particle.update(particles);
                particle.render(context);
            }
            requestAnimationFrame(draw);
        }

        document.addEventListener("keydown", (event) => {
            if (event.code === "Space") {
                if (isPaused) {
                    draw();
                    isPaused = false;
                } else {
                    isPaused = true;
                }
            }
            if (event.code === "F2") {
                setupParticles();
            }
            if (event.code === "F11") {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen();
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                }
            }
        });

        let isPaused = false;

        particleCountElement.addEventListener("change", setupParticles);
        window.addEventListener("resize", () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        setupParticles();
        draw();

    </script>
</body>
</html>
